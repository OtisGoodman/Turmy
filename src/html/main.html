<!DOCTYPE html>
<html>
  <head>
    <meta charset="UTF-8"/>
    <title>Turmy</title>
    <link rel="stylesheet" type="text/css" href="../assets/style.css" />
  </head>
  <body>
      <div class="top">
        <div class="dot close" onclick="close" title="close" style="background:#ED594A;">
            +
        </div>
        <p class="title">Turmy</p>
      </div>
      <div class="display">
        <div class="content">
            <p class="howto2"><i>Before using the webhook make sure to read the docs.<br></i></p>
          <div class="screen">
        <input type="text" name="msg"  id = "input" class = 'msg' title="Turmy Message" inputsize ="50px" placeholder="Turmy Message"><br>
          </div>
          <div class="footer">
            <p><a onclick="redirect('Docs')" class="link">docs</a><spacer><a class="link" onclick="redirect('Config')">config</a><spacer><a class="link" onclick="openExternalLink('https://github.com/OtisGoodman/Turmy')">github</a></p>
          </div>
        </div>
      </div>
    <script>
        const electron = require("electron");
        const IPC = electron.ipcRenderer;
        var shell = require("electron").shell;
        const storage = require('../storage.js')
        isConfigWriten()
        document.querySelector('.close').addEventListener('click', function() {
            IPC.send('closeMain');
          });

          function openExternalLink(url) {
            shell.openExternal(url)
            }

          function redirect(page){
            IPC.send(`swap${page}`);
          }

        function isConfigWriten() {
          if (storage.get("url") == "undefined" || storage.get("username" == "undefined")){
            document.getElementById("input").className = "msg-d";
            document.getElementById("input").disabled = true;
          }else{
            document.getElementById("input").className = "msg";
            document.getElementById("input").disabled = false;
          }
        }



        function clearStorage() {
          storage.clear("url")
          storage.clear("username")
        }
    </script>
  </body>
</html>
